/*
 AngularDrop v0.0.1-bb82d83
 (c) 2013 Caitlin Potter & Contributors. http://caitp.github.io/angular-drop
 License: MIT
*/
(function(r,s,n){'use strict';function p(){}function q(){}var l={full:"0.0.1-bb82d83",major:"0",minor:"0",dot:"1",codeName:"badger"},g,f=function(a,b,d){Object.defineProperty?Object.defineProperty(a,b,{get:d,set:function(){},configurable:!1,enumerable:!0}):a.__defineGetter__?a.__defineGetter__(b,d):a[b]=d()},m={nodeEq:function(a,b){return typeof("string"===a.nodeName?a.nodeName:a[0].nodeName).toUpperCase()===b},offset:function(a){a=a.length?a[0]:a;var b={top:0,left:0},d=a&&a.ownerDocument;if(d){d=
d.documentElement;if(!m.contains(d,a))return b;angular.isFunction(a.getBoundingClientRect)&&(b=a.getBoundingClientRect());a=m.window(d);return{top:b.top+a.pageYOffset-d.clientTop,left:b.left+a.pageXOffset-d.clientLeft}}},contains:function(a,b){var d=9===a.nodeType?a.documentElement:a,e=b&&b.parentNode;return a===e||!(!e||1!==e.nodeType||!m.contains(d,e))},window:function(a){a="undefined"===typeof a.nodeName&&"number"===typeof a.length?a[0]:a;return m.isWindow(a)?a:9===a.nodeType&&a.defaultView||a.ownerDocument&&
(a.ownerDocument.defaultView||a.ownerDocument.parentWindow)},isWindow:function(a){return a&&a.document&&a.location&&a.alert&&a.setInterval}},t=["$drag","$document","$timeout",function(a,b,d){return{restrict:"A",link:function(e,k,c){a.draggable(k)}}}],u=function(){function a(a){angular.isUndefined(a)&&(a=r.event);angular.isUndefined(a.layerX)&&(a.layerX=a.offsetX);angular.isUndefined(a.layerY)&&(a.layerY=a.offsetY)}this.$get=["$document","$drop",function(b,d){var e={isDraggable:function(a){return!!e.draggable(a,
!1)},draggable:function(a,e){a=angular.element(a);var b=a.data("$draggable");if(b)return b;if(!1===e)return n;e=angular.extend({constraints:null,delay:500,distance:1},e||{});b=new p;b.element=a;b.options=e;a.on("mousedown",b.dragStart);a.data("$draggable",b);return b}};p.prototype={constructor:p,dragStart:function(k){a(k);k.preventDefault();var c=e.draggable(this);g&&g.dragEnd(k);g=c;c.cssDisplay=c.element.css("display");c.hanging||(c.cssPosition=c.element.css("position"));c.offset=c.positionAbs=
m.offset(c.element);c.offset.scroll=!1;angular.extend(c.offset,{click:{top:k.pageY-c.offset.top,left:k.pageX-c.offset.left}});c.lastMouseY=k.pageY;c.lastMouseX=k.pageX;c.startEvent=k;c.element.css({position:"absolute",left:c.offset.left,top:c.offset.top});b.on("mousemove",c.drag);b.on("mouseup",c.dragEnd)},dragEnd:function(a){a.preventDefault();b.off("mousemove",self.drag);b.off("mouseup",self.dragEnd);d.drop(a)},drag:function(e){a(e);e.preventDefault();var c=g;if(c){var b=c.element.prop("style"),
d=e.pageY;e=e.pageX;var f=b.left||0,l;l=parseInt(b.top||0,10)+(d-c.lastMouseY);f=parseInt(f,10)+(e-c.lastMouseX);b.left=f+"px";b.top=l+"px";c.lastMouseY=d;c.lastMouseX=e}},finish:function(){this.element.css({position:this.cssPosition});g=n}};f(e,"current",function(){return g});f(e,"version",function(){return l});return e}];f(this,"version",function(){return l})},v=["$drop",function(a){return{restrict:"A",link:function(b,d,e){a.droppable(d)}}}],w=function(){this.$get=["$document","$rootScope",function(a,
b){var d={isDroppable:function(a){return!!$drag.droppable(a,!1)},droppable:function(a,b){a=angular.element(a);var c=a.data("$droppable");if(c)return c;if(!1===b)return n;b=angular.extend({constraints:null,delay:500,distance:1},b||{});c=new q;c.element=a;c.options=b;a.data("$droppable",c);return c},drop:function(a,d){function c(){f.hanging=!0;f.element.css({display:f.cssDisplay});g=n;b.$emit("$badDrop",f)}if(g&&("undefined"===typeof a&&(a=r.event),angular.isObject(a)&&("number"===typeof a.clientX&&
"number"===typeof a.clientY?(d=a.clientY,a=a.clientX):"number"===typeof a.left&&"number"===typeof a.top&&(d=a.top,a=a.left)),"number"===typeof a&&"number"===typeof d)){var f=g,h;f.element.css({display:"none"});h=s.elementFromPoint(a,d);if(!h)return c();3===h.nodeType&&(h=h.parentNode);h=angular.element(h);h=h.inheritedData("$droppable");if(!h)return c();h.drop(f);return!0}}};q.prototype={constructor:q,drop:function(a,d){a=a||g;if("number"===typeof a.length||a.nodeName)a=angular.element(a).data("$draggable");
a&&a.constructor===p&&(d=angular.extend(d||{},{display:a.cssDisplay}),this.element.append(a.element),a.element.css({display:d.display}),a.hanging=!1,b.$$phase||b.$apply(),a.finish())}};f(d,"version",function(){return l});return d}];f(this,"version",function(){return l})},x=function(){this.$get=[function(){var a={};f(a,"current",function(){return g});f(a,"version",function(){return l});return a}];f(this,"version",function(){return l})};(function(){angular.module("ui.drop",[],["$provide",function(a){a.provider({$dnd:x,
$drag:u,$drop:w})}]).directive({draggable:t,droppable:v})})()})(window,document);
//# sourceMappingURL=angular-drop.min.js.map
