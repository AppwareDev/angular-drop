/*
 AngularDrop v0.0.1-0110d87
 (c) 2013 Caitlin Potter & Contributors. http://caitp.github.io/angular-drop
 License: MIT
*/
(function(s,u,p){'use strict';function q(){}function r(){}var n={full:"0.0.1-0110d87",major:"0",minor:"0",dot:"1",codeName:"badger"},l,t={"false":!1,"true":!0,"":!0},k=function(a,c,d){Object.defineProperty?Object.defineProperty(a,c,{get:d,set:function(){},configurable:!1,enumerable:!0}):a.__defineGetter__?a.__defineGetter__(c,d):a[c]=d()},f={nodeEq:function(a,c){return typeof("string"===a.nodeName?a.nodeName.toLowerCase():a[0].nodeName).toLowerCase()===c},offset:function(a){a=a.length?a[0]:a;var c=
{top:0,left:0},d=a&&a.ownerDocument;if(d){d=d.documentElement;if(!f.contains(d,a))return c;angular.isFunction(a.getBoundingClientRect)&&(c=a.getBoundingClientRect());a=f.window(d);return{top:c.top+a.pageYOffset-d.clientTop,left:c.left+a.pageXOffset-d.clientLeft}}},contains:function(a,c){var d=9===a.nodeType?a.documentElement:a,e=c&&c.parentNode;return a===e||!(!e||1!==e.nodeType||!f.contains(d,e))},window:function(a){a="undefined"===typeof a.nodeName&&"number"===typeof a.length?a[0]:a;return f.isWindow(a)?
a:9===a.nodeType&&a.defaultView||a.ownerDocument&&(a.ownerDocument.defaultView||a.ownerDocument.parentWindow)},isWindow:function(a){return a&&a.document&&a.location&&a.alert&&a.setInterval},swapCss:function(a,c,d,e){var h,m={};for(h in c)m[h]=a.style[h],a.style[h]=c[h];d=d.apply(a,e||[]);for(h in c)a.style[h]=m[h];return d},swapDisplay:/^(none|table(?!-c[ea]).+)/,cssShow:{position:"absolute",visibility:"hidden",display:"block"},size:function(a){function c(a){return{width:a.offsetWidth,height:a.offsetHeight}}
var d=angular.element(a);a=a.nodeName?a:a[0];return 0===a.offsetWidth&&f.swapDisplay.test(d.css("display"))?f.swapCss(a,f.cssShow,c,[a]):c(a)},keepSize:function(a){a=f.size(a);a.width+="px";a.height+="px";return a},closest:function(a,c){a=angular.element(a);if($.fn&&angular.isFunction($.fn.closest))return a.closest(c);a=a[0];c=c.toLowerCase();do if(a.nodeName.toLowerCase()===c)return angular.element(a);while(a=a.parentNode)}},v={dragKeepSize:"keepSize",dragWithin:"dragWithin"},w=["$drag","$document",
"$interpolate","$timeout",function(a,c,d,e){return{restrict:"A",link:function(e,m,b){var g={};angular.forEach(v,function(a,m){if("undefined"!==typeof b[m]){var c;a:if(c=d(b[m],!1)(e),"string"===typeof c){var f;if(t.hasOwnProperty(c)){c=t[c];break a}else f=parseInt(c,10),f===f&&(c=f)}g[a]=c}});a.draggable(m,g)}}}],x=function(){function a(a){angular.isUndefined(a)&&(a=s.event||{pageX:0,pageY:0,preventDefault:function(){}});angular.isFunction(a.preventDefault)||(a.preventDefault=function(){});return a}
function c(a){if("undefined"!==typeof a&&0!==a.length){var e=f.offset(a);a=f.size(a);e.right=e.left+a.width;e.bottom=e.top+a.height;return e}}this.$get=["$document","$drop",function(d,e){var h={isDraggable:function(a){return!!h.draggable(a,!1)},draggable:function(a,b){a=angular.element(a);var e=a.data("$draggable");if(e)return e;if(!1===b)return p;b=angular.extend({delay:500,distance:1},b||{});e=new q;e.element=a;e.options=b;a.on("mousedown",e.dragStart);a.data("$draggable",e);return e}};q.prototype=
{constructor:q,dragStart:function(e){e=a(e);e.preventDefault();var b=angular.isObject(this)&&this.constructor===q?this:h.draggable(this);l&&l.dragEnd(e);l=b;b.cssDisplay=b.element.css("display");b.dimensions=f.size(b.element);b.hanging||(b.cssPosition=b.element.css("position"),b.options.keepSize&&(b.keepSize={width:b.element[0].style.width,height:b.element[0].style.height},b.element.css(f.keepSize(b.element))));if("string"===typeof b.options.dragWithin){var g;g=b.options.dragWithin;var k=b.element;
g=""!==g.length?/^(\.|#)/.test(g)&&$.fn&&angular.isFunction($.fn.closest)?c(k.parent().closest(g)):/^(\^|parent)$/.test(g)?c(k.parent()):c(f.closest(k.parent(),g)):void 0;b.constraints=g}b.offset=b.positionAbs=f.offset(b.element);b.offset.scroll=!1;angular.extend(b.offset,{click:{top:e.pageY-b.offset.top,left:e.pageX-b.offset.left}});b.lastMouseY=e.pageY;b.lastMouseX=e.pageX;b.startEvent=e;b.element.css({position:"absolute",left:b.offset.left,top:b.offset.top});d.on("mousemove",b.drag);d.on("mouseup",
b.dragEnd)},dragEnd:function(a){a.preventDefault();d.off("mousemove",self.drag);d.off("mouseup",self.dragEnd);e.drop(a)},drag:function(e){e=a(e);e.preventDefault();var b=l;if(b){var c=b.element.prop("style"),d=e.pageY;e=e.pageX;var h=c.left||0,f;f=parseInt(c.top||0,10)+(d-b.lastMouseY);h=parseInt(h,10)+(e-b.lastMouseX);if(!b.constraints||h>=b.constraints.left&&h+b.dimensions.width<=b.constraints.right&&f>=b.constraints.top&&f+b.dimensions.height<=b.constraints.bottom)c.left=h+"px",c.top=f+"px";b.lastMouseY=
d;b.lastMouseX=e}},finish:function(){this.element.css({position:this.cssPosition});l=this.dimensions=p}};k(h,"current",function(){return l});k(h,"version",function(){return n});return h}];k(this,"version",function(){return n})},y=["$drop",function(a){return{restrict:"A",link:function(c,d,e){a.droppable(d)}}}],z=function(){this.$get=["$document","$rootScope",function(a,c){var d={isDroppable:function(a){return!!$drag.droppable(a,!1)},droppable:function(a,c){a=angular.element(a);var d=a.data("$droppable");
if(d)return d;if(!1===c)return p;c=angular.extend({constraints:null,delay:500,distance:1},c||{});d=new r;d.element=a;d.options=c;a.data("$droppable",d);return d},drop:function(a,d){function f(){b.hanging=!0;b.element.css({display:b.cssDisplay});l=p;c.$emit("$badDrop",b)}if(l&&("undefined"===typeof a&&(a=s.event),angular.isObject(a)&&("number"===typeof a.clientX&&"number"===typeof a.clientY?(d=a.clientY,a=a.clientX):"number"===typeof a.left&&"number"===typeof a.top&&(d=a.top,a=a.left)),"number"===
typeof a&&"number"===typeof d)){var b=l,g;b.element.css({display:"none"});g=u.elementFromPoint(a,d);if(!g)return f();3===g.nodeType&&(g=g.parentNode);g=angular.element(g);g=g.inheritedData("$droppable");if(!g)return f();g.drop(b);return!0}}};r.prototype={constructor:r,drop:function(a,d){a=a||l;if("number"===typeof a.length||a.nodeName)a=angular.element(a).data("$draggable");a&&a.constructor===q&&(d=angular.extend(d||{},{display:a.cssDisplay}),this.element.append(a.element),a.options.keepSize&&(a.element.css(a.keepSize),
a.keepSize=p),a.element.css({display:d.display}),a.hanging=!1,c.$$phase||c.$apply(),a.finish())}};k(d,"version",function(){return n});return d}];k(this,"version",function(){return n})},A=function(){this.$get=[function(){var a={};k(a,"current",function(){return l});k(a,"version",function(){return n});return a}];k(this,"version",function(){return n})};(function(){angular.module("ui.drop",[],["$provide",function(a){a.provider({$dnd:A,$drag:x,$drop:z})}]).directive({draggable:w,droppable:y})})()})(window,
document);
//# sourceMappingURL=angular-drop.min.js.map
